(()=>{"use strict";var e={627:e=>{e.exports=function(e){var t;t="string"==typeof e&&e.length?new Date(e):e instanceof Date?e:new Date;var l=new Date(t.valueOf()),o=(t.getDay()+6)%7;l.setDate(l.getDate()-o+3);var n=l.valueOf();return l.setMonth(0,1),4!==l.getDay()&&l.setMonth(0,1+(4-l.getDay()+7)%7),1+Math.ceil((n-l)/6048e5)}}},t={};function l(o){var n=t[o];if(void 0!==n)return n.exports;var s=t[o]={exports:{}};return e[o](s,s.exports,l),s.exports}(()=>{const e={events:{},subscribe:function(e,t){console.log(`PUBSUB: someone just subscribed to know about ${e}`),this.events[e]=this.events[e]||[],this.events[e].push(t),console.log(this.events)},unsubscribe:function(e,t){console.log(`PUBSUB: someone just UNsubscribed to know about ${e}`),this.events[e]&&(this.events[e]=this.events[e].filter((e=>e!==t)))},publish:function(e,t){console.log(`PUBSUB: Making an broadcast about ${e} with ${Object.values(t)[0]}`),this.events[e]&&this.events[e].forEach((e=>{e(t)}))}},t=()=>{let t=document.querySelector(".textArea"),l=t.value.trim();t.value="";let o=document.querySelector(".datePicker").value,n={task:l,date:o};console.log(n),l.match(/^.{3,}$/)?(console.log(`TASK SUBMIT: ${l} ${o}`),e.publish("taskAdded",n)):alert("Enter atleast 3 characters")},o=()=>{let e=document.createElement("li"),l=document.createElement("button");l.textContent="+ Add task",l.classList.add("iniTaskBtn"),e.appendChild(l);const o='<div class="atbContainer">\n  <div class=taskTextDate>\n  <textarea\n    name="task"\n    id="task"\n    cols="80"\n    rows="5"\n    class="textArea"\n  ></textarea>\n  <input type="date" id="datePicker" class="datePicker" name="datePicker">\n  </div>\n  <button class="addTaskBtn">Add Task</button>\n  <button class="cancelTaskBtn">Cancel</button>\n</div>';return l.addEventListener("click",(function(){e.innerHTML="",e.innerHTML+=o,document.querySelector(".datePicker").min=(new Date).toISOString().split("T")[0],document.querySelector(".addTaskBtn").addEventListener("click",t),document.querySelector(".cancelTaskBtn").addEventListener("click",(function(){e.innerHTML="",e.appendChild(l)}))})),{li:e,atbContainer:o}};let n=l(627);function s(e){let t=new Date(e).getMonth()+1,l=new Date(e).getDate(),o=new Date(e).getFullYear();return n(`${t}/${l}/${o}`)}function a(){return l(627)(`${(new Date).getMonth()+1}/${(new Date).getDate()}/${(new Date).getFullYear()}`)}const c=()=>{let e=JSON.parse(localStorage.getItem("tasksList"));e&&e.projects.forEach((e=>{"Inbox"==e.name&&(console.log(...e.tasks),[...e.tasks].forEach((e=>{u.taskAdded(e)})))}))};function r(){let e=document.querySelector(".projects-task-list"),t=Array.from(e.querySelectorAll(".projects-task"));console.log(t),t.forEach((e=>{e.addEventListener("click",(t=>{if(t.target.classList.contains("projects-task")||t.target.classList.contains("projects-task-text")){let t=document.querySelector("aside"),l=t.querySelectorAll("button"),o=t.querySelectorAll("div");l.forEach((e=>e.classList.remove("tabSelectedColor"))),o.forEach((e=>e.classList.remove("tabSelectedColor")));let n=e;n.classList.add("tabSelectedColor"),console.log(n);let s=n.firstElementChild.innerText.replace("üìë","").trim();console.log(s);let a=document.querySelector(".list-container"),c=document.querySelector(".list-header");a.innerHTML="",c.innerText=s,JSON.parse(localStorage.getItem("tasksList")).projects.forEach((e=>{e.name==s&&e.tasks.length>0?u.renderTasksMainContainer(e.tasks):e.name==s&&0==e.tasks.length&&u.render(a)}))}}))}))}function i(e){return`\n  <div class="projects-task">\n   <div class="projects-task-text">üìë ${e}</div>\n   <div class="projects-task-cancel">‚ùå</div>\n  </div>\n  `}function d(){let e=document.querySelector(".list-header").innerText;document.querySelector("aside").querySelectorAll("div").forEach((t=>{t.innerText.replace("üìë","").trim()==e&&t.classList.add("tabSelectedColor")}))}const u={list:[],render:e=>{e.appendChild(o().li),document.querySelector(".list-container").addEventListener("click",u.taskDeleted)},taskSubscribe:()=>{e.subscribe("taskAdded",u.taskAdded)},taskAdded:e=>{JSON.parse(localStorage.getItem("tasksList"))||localStorage.setItem("tasksList",JSON.stringify({projects:[{name:"Inbox",tasks:[]}]})),console.log(e),console.log(`TASKS: ${Object.values(e)[0]} was added`);let t=document.querySelector(".projects-task-list"),l=Array.from(t.querySelectorAll(".projects-task"));l.forEach((t=>{if(t.classList.contains("tabSelectedColor")){console.log("Projects task tab selectedcolor");let l=t.firstElementChild.innerText.replace("üìë","").trim();console.log(l),console.log(e);let o=JSON.parse(localStorage.getItem("tasksList"));o.projects.forEach((t=>{t.name==l&&t.tasks.push(e),localStorage.setItem("tasksList",JSON.stringify(o))}))}}));let o=u.list;o.push(e);let n=o.filter(((e,t,l)=>l.findIndex((t=>t.task==e.task&&t.date==e.date))==t));if(u.list=n,console.log(n),JSON.parse(localStorage.getItem("tasksList")).projects.forEach((e=>{"Inbox"!==e.name&&e.tasks.forEach((e=>{console.log(e.task.concat(e.date));let t=e.task.concat(e.date);n=n.filter((e=>e.task.concat(e.date)!==t)),console.log(n),u.list=n}))})),document.querySelector(".inbox-btn").classList.contains("tabSelectedColor")){let e=JSON.parse(localStorage.getItem("tasksList"));if(null==e)localStorage.setItem("tasksList",JSON.stringify({projects:[{name:"Inbox",tasks:n}]}));else{let t=e.projects;console.log(n),t.forEach((e=>{"Inbox"==e.name?e.tasks=n:"Inbox"!==e.name&&t.push({name:"Inbox",tasks:n})})),e.projects=e.projects.filter(((e,t,l)=>t===l.findIndex((t=>t.name===e.name)))),localStorage.setItem("tasksList",JSON.stringify(e))}}u.renderTasksMainContainer(u.list),l.forEach((e=>{if(e.classList.contains("tabSelectedColor")){let t=e.firstElementChild.innerText.replace("üìë","").trim();JSON.parse(localStorage.getItem("tasksList")).projects.forEach((e=>{e.name==t&&u.renderTasksMainContainer(e.tasks)}))}}))},renderTasksMainContainer:e=>{let t=document.querySelector(".list-container");t.innerHTML="";let l=document.createDocumentFragment(),o=document.createDocumentFragment();e.forEach((e=>{let t=document.createElement("li");u.taskElement(e,t),l.appendChild(t)})),u.render(o),t.appendChild(l),t.appendChild(o)},taskDeleted:t=>{let l=t.target.closest("input[type=checkbox]");if(!l)return;let o=l.nextElementSibling.innerText.split("(")[0].trim(),n=t.target.closest("li").querySelector(".taskDate").innerText;console.log(o),console.log(n),u.list=u.list.filter((e=>!(e.task.includes(o)&&e.date.includes(n)))),l.parentElement.parentElement.parentElement.removeChild(l.parentElement.parentElement),console.log(u.list);let s=JSON.parse(localStorage.getItem("tasksList"));s.projects.forEach((e=>{if("Inbox"==e.name)e.tasks=u.list;else if("Inbox"!==e.name){let t=e.tasks;t=t.filter((e=>e.task.concat(e.date)!==o.concat(n))),console.log(t),console.log(e),e.tasks=t}})),localStorage.setItem("tasksList",JSON.stringify(s)),console.log(`TASKS: taskDeleted ${o}`),e.publish("taskDeleted",u.list)},taskEdited:e=>{let t=e.target.closest("li"),l=t.querySelector("p"),n=t.querySelector("p").textContent;const c=/^.{3,}$/;let r=t.querySelector(".taskDate"),i=r.textContent;t.innerHTML="",t.innerHTML+=o().atbContainer;let d=document.querySelector(".textArea");d.innerText=n,console.log(d);let m={taskTextEl:l,date:i},k=document.querySelector(".datePicker");k.value=i,k.min=(new Date).toISOString().split("T")[0],document.querySelector(".addTaskBtn").addEventListener("click",(()=>{let e=k.value;if(t.innerHTML="",d.value.match(c)){let l={textArea:d,date:e};console.log(l),u.taskElement(l,t)}else alert("Enter atleast 3 characters"),u.taskElement(m,t);let l=document.querySelector(".list-container");if(document.querySelector(".today-btn").classList.contains("tabSelectedColor")){let e=Array.from(l.querySelectorAll("li"));console.log(e),l.innerHTML="";for(let t=0;t<e.length;t++){let o=e[t],n=e[t].querySelector(".taskDate").innerText;console.log(o),console.log(n);let s=new Date,a=s.getFullYear()+"-"+("0"+(s.getMonth()+1)).slice(-2)+"-"+("0"+s.getDate()).slice(-2);console.log(a),n==a&&l.appendChild(o)}}if(document.querySelector(".thisweek-btn").classList.contains("tabSelectedColor")){let e=Array.from(l.querySelectorAll("li"));console.log(e),l.innerHTML="";for(let t=0;t<e.length;t++){let o=e[t],n=s(e[t].querySelector(".taskDate").innerText);console.log(o),console.log(n),n==a()&&l.appendChild(o)}}console.log(u.list),u.list.forEach((t=>{t.task===n&&t.date===r.textContent&&(t.task=d.value,t.date=e)})),console.log(u.list);let o=JSON.parse(localStorage.getItem("tasksList")),g=document.querySelector(".list-header").textContent,p={textArea:d,date:e};console.log(g),o.projects.forEach((e=>{"Inbox"==e.name?e.tasks=u.list:e.name==g&&(e.tasks.forEach((e=>{e.task==Object.values(p)[0].innerText&&e.date==i&&(e.task=Object.values(p)[0].value,e.date=Object.values(p)[1])})),console.log(Object.values(p)[0].innerText),console.log(Object.values(p)[1]))})),localStorage.setItem("tasksList",JSON.stringify(o))})),document.querySelector(".cancelTaskBtn").addEventListener("click",(()=>{t.innerHTML="",u.taskElement(m,t)}))},taskElement:(e,t)=>{let l=document.createElement("div");l.className="taskDetails";let o=document.createElement("p"),n=document.createElement("input");n.type="checkbox",n.id="newCheckBox",l.appendChild(n),"textArea"==Object.keys(e)[0]?(o.innerText=`${Object.values(e)[0].value}`,t.dataset.taskName=`${Object.values(e)[0].value}`):"taskTextEl"==Object.keys(e)[0]?(o.innerText=`${Object.values(e)[0].innerText}`,t.dataset.taskName=`${Object.values(e)[0].innerText}`):(o.innerText=`${Object.values(e)[0]}`,t.dataset.taskName=`${Object.values(e)[0]}`),l.appendChild(o),t.appendChild(l);let s=document.createElement("div");s.className="taskTools";let a=document.createElement("div");a.className="taskDate",""==Object.values(e)[1]?a.innerText="No Date":a.innerText=Object.values(e)[1],s.appendChild(a);let c=document.createElement("button");c.textContent="Edit",c.className="taskEditBtn",c.addEventListener("click",u.taskEdited),s.appendChild(c),t.appendChild(s)}};document.addEventListener("DOMContentLoaded",(()=>{let e=document.querySelector(".list-container");u.render(e),u.taskSubscribe(),c(),(()=>{let e=document.querySelector(".list-container"),t=document.querySelector(".inbox-btn"),l=document.querySelector(".today-btn"),n=document.querySelector(".thisweek-btn"),i=document.querySelector(".list-header");l.addEventListener("click",(()=>{let t=document.querySelector("aside"),o=t.querySelectorAll("button"),n=t.querySelectorAll("div");o.forEach((e=>e.classList.remove("tabSelectedColor"))),n.forEach((e=>e.classList.remove("tabSelectedColor"))),l.classList.add("tabSelectedColor"),i.innerText="Today",e.innerHTML="";let s=new Date,a=s.getFullYear()+"-"+("0"+(s.getMonth()+1)).slice(-2)+"-"+("0"+s.getDate()).slice(-2);console.log(a);let c=JSON.parse(localStorage.getItem("tasksList"));console.log(c),c.projects.forEach((t=>{let l=[...t.tasks.concat(t.name)];console.log(l),console.log(l[l.length-1]);let o=l.filter((e=>e.date==a));o.forEach((e=>{e.task=`${e.task} (${l[l.length-1]})`})),console.log(o);for(let t=0;t<o.length;t++){let l=document.createElement("li");u.taskElement(o[t],l),e.appendChild(l)}}))})),n.addEventListener("click",(()=>{let t=document.querySelector("aside"),l=t.querySelectorAll("button"),o=t.querySelectorAll("div");l.forEach((e=>e.classList.remove("tabSelectedColor"))),o.forEach((e=>e.classList.remove("tabSelectedColor"))),n.classList.add("tabSelectedColor"),i.innerText="This Week",e.innerHTML="";let c=a();console.log(c),console.log(s("2022-05-07"));let r=JSON.parse(localStorage.getItem("tasksList"));console.log(r),r.projects.forEach((t=>{let l=[...t.tasks.concat(t.name)];console.log(l),console.log(l[l.length-1]);let o=l.filter((e=>s(e.date)==c));o.forEach((e=>{e.task=`${e.task} (${l[l.length-1]})`})),console.log(o);for(let t=0;t<o.length;t++){let l=document.createElement("li");u.taskElement(o[t],l),e.appendChild(l)}}))})),t.addEventListener("click",(()=>{let l=document.querySelector("aside"),n=l.querySelectorAll("button"),s=l.querySelectorAll("div");n.forEach((e=>e.classList.remove("tabSelectedColor"))),s.forEach((e=>e.classList.remove("tabSelectedColor"))),t.classList.add("tabSelectedColor"),i.innerText="Inbox",console.log(e),e.innerHTML="";let a=JSON.parse(localStorage.getItem("tasksList"));console.log(a),null===a||0===a.length?e.appendChild(o().li):a.projects.forEach((t=>{("Inbox"==t.name&&0==t.tasks.length||"Inbox"!==t.name&&0==t.tasks.length||"Inbox"!==t.name)&&e.appendChild(o().li)})),c()})),r()})(),(()=>{let e=document.querySelector("#toggle");const t=document.querySelector("aside"),l=document.querySelector("main"),o=document.querySelector(".default-task-list"),n=document.querySelector(".projects-task-list");e.addEventListener("click",(()=>{"checkbox"==e.type&&1==e.checked&&(console.log("input checked"),t.style.left="0",l.style.backgroundColor="rgba(0, 0, 0, 0.5)",o.querySelectorAll("button").forEach((o=>{o.addEventListener("click",(()=>{e.checked=!1,t.style.left="-70%",l.style.backgroundColor="#eee"}))})),n.querySelectorAll("div").forEach((o=>{o.addEventListener("click",(()=>{e.checked=!1,t.style.left="-70%",l.style.backgroundColor="#eee"}))}))),"checkbox"==e.type&&0==e.checked&&(console.log("input not checked"),t.style.left="-70%",l.style.backgroundColor="#eee")}))})(),document.querySelector(".inbox-btn").classList.add("tabSelectedColor"),(()=>{let e=document.querySelector(".projects-task-list"),t=JSON.parse(localStorage.getItem("tasksList"));null!=t&&t.projects.forEach((t=>{"Inbox"!==t.name&&(e.innerHTML+=i(t.name))}))})(),(()=>{let e=document.querySelector(".projects-task-list"),t=[],l=document.createElement("button");l.classList.add("add-project-btn"),l.append("‚ûï Add Project");let o=JSON.parse(localStorage.getItem("tasksList"));null==o||o.projects.forEach((e=>{"Inbox"!==e.name&&t.push(e.name)})),e.appendChild(l);let n='\n  <div class="projects-task-modal">\n   <input type="text" class="projects-task-input"/>\n   <buttton class="projects-task-addBtn">Add</buttton>\n   <buttton class="projects-task-cancelBtn">Cancel</buttton>\n  </div>\n  ';function s(e){if("projects-task-cancel"==e.target.className){let l=document.querySelector(".inbox-btn"),o=e.target.closest("div"),n=o.previousElementSibling.innerText.replace("üìë","").trim();console.log(n);let s=o.parentNode;s.classList.contains("tabSelectedColor")&&(s.classList.remove("tabSelectedColor"),l.classList.add("tabSelectedColor"),c(),document.querySelector(".list-header").innerText="Inbox"),s.remove();let a=t.indexOf(n);a>-1&&t.splice(a,1),console.log(t);let r=JSON.parse(localStorage.getItem("tasksList"));r.projects=r.projects.filter((e=>e.name!==n)),console.log(r),localStorage.setItem("tasksList",JSON.stringify(r))}}l.addEventListener("click",(()=>{if(console.log("Add project Button clicked!"),t.length>0){e.innerHTML="";for(let l=0;l<t.length;l++)e.innerHTML+=i(t[l]),Array.from(document.querySelectorAll(".projects-task-cancel")).forEach((e=>{e.addEventListener("click",s)}));e.innerHTML+=n}else e.innerHTML="",e.innerHTML=n;document.querySelector(".projects-task-cancelBtn").addEventListener("click",(()=>{if(t.length>0){e.innerHTML="";for(let l=0;l<t.length;l++)e.innerHTML+=i(t[l]),Array.from(document.querySelectorAll(".projects-task-cancel")).forEach((e=>{e.addEventListener("click",s)}));e.appendChild(l)}else e.innerHTML="",e.appendChild(l);d(),r()}));let o=document.querySelector(".projects-task-addBtn"),a=document.querySelector(".projects-task-input");o.addEventListener("click",(()=>{let o=a.value.trim();if(!o.match(/[a-zA-Z0-9]/))return void(a.placeholder="Enter atleast 1 char or number");t.push(o),console.log(t);let n={name:o,tasks:[]},c=JSON.parse(localStorage.getItem("tasksList"));if(null==c?localStorage.setItem("tasksList",JSON.stringify({projects:[n]})):(c.projects.push(n),console.log(t),console.log(c.projects),localStorage.setItem("tasksList",JSON.stringify(c))),t.length>0){e.innerHTML="";for(let l=0;l<t.length;l++)e.innerHTML+=i(t[l]),Array.from(document.querySelectorAll(".projects-task-cancel")).forEach((e=>{e.addEventListener("click",s)}));e.appendChild(l)}else e.appendChild(l);d(),r()})),d(),r()})),Array.from(document.querySelectorAll(".projects-task-cancel")).forEach((e=>{e.addEventListener("click",s)}))})(),r()}))})()})();